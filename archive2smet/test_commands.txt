# Test Python modules and GRIB reading on Fir login node
# Copy and paste these commands one at a time

# OPTION 1: Test with virtual environment (recommended)
# First, set up the venv once: ./setup_home_venv.sh
# Then test:

# 1. Load required modules
module purge
module load python
module load scipy-stack
module load eccodes

# 2. Activate virtual environment
source $HOME/python/archive2smet/bin/activate

# 3. Test numpy import
python -c "import numpy as np; print('✓ numpy', np.__version__)"

# 4. Test pandas import
python -c "import pandas as pd; print('✓ pandas', pd.__version__)"

# 5. Test scipy import
python -c "import scipy; from scipy.spatial import cKDTree; print('✓ scipy', scipy.__version__)"

# 6. Test xarray import
python -c "import xarray as xr; print('✓ xarray', xr.__version__)"

# 7. Test cfgrib import
python -c "import cfgrib; print('✓ cfgrib', cfgrib.__version__)"

# 8. Test reading a GRIB file (replace path with your actual GRIB file)
python -c "import xarray as xr; ds = xr.open_dataset('/project/6005576/data/nwp/hrdps/2023/HRDPS_20230101.grib2', engine='cfgrib', backend_kwargs={'time_dims': ('valid_time',), 'encode_cf': ('time', 'geography', 'vertical'), 'filter_by_keys': {'typeOfLevel': 'surface'}, 'decode_timedelta': True}); print('✓ GRIB file opened successfully'); print('Variables:', list(ds.data_vars)); print('Dimensions:', dict(ds.sizes))"

# OPTION 2: Test without venv (just modules, may have compatibility issues)
# Uncomment below if you want to test without venv:
# module purge
# module load python
# module load scipy-stack
# module load eccodes
# python -c "import numpy as np; print('✓ numpy', np.__version__)"
# python -c "import pandas as pd; print('✓ pandas', pd.__version__)"
# python -c "import scipy; print('✓ scipy', scipy.__version__)"

